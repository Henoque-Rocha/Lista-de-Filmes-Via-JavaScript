<html>

<body>
    
    <div class="container"></div>

<script>

//Primeira forma e mais antiga de fazer uma requisição//
/*
var request = new XMLHttpRequest();
request.open('GET','https://jsonplaceholder.typicode.com/todos/1',true);
request.onload = function(){
    if(this.status >= 200 && this.status <400){
        //Resquest feita com Sucesso!
        var data = JSON.parse(this.response);
        console.log(data);
    }else{
        //Erro.
    }
    request.onerror = function(){

    }
}
request.send();
*/
//-----------------------------------------------------//

//Utilizando o FETCH para fazer uma Requisição//

/*
fetch('https://jsonplaceholder.typicode.com/todos/1')
.then(response=> response.json())
.then(json=>console.log(json));
*/
//---------ENVIANDO POST-------------//
/*
fetch('https://jsonplaceholder.typicode.com/posts',{
    method:'POST',
    body:JSON.stringify({
        title:'Danki Code 2022',
        body:'Meu conteúdo',
        userId: 10
    }),
    headers:{
        'Content-Type':'application/json; charset=UTF-8'
    }
}).then(response=> response.json())
.then(json=>console.log(json));
*/
//----------------------------------------------//


fetch('https://api.themoviedb.org/3/movie/popular?api_key=506fadb0256c13349acc05dabebf9604&language=en-US&page=1',{
    method:'GET'
}).then(response=>response.json()).then(function(json){

var container = document.querySelector('.container');

json.results.map(function(val){

    container.innerHTML+=`
    <div style="cursor:pointer;" class="tituloFilmes">`+val.title+`
    <div style="display:none;" class="description">`+val.overview+`</div><hr> 
    </div>
    `;
var titulo = document.querySelectorAll('.tituloFilmes');
for(var i = 0; i < titulo.length; i++){
    titulo[i].addEventListener('click',function(t){
        if(t.target.querySelector('.description').style.display == 'none'){
            t.target.querySelector('.description').style.display ='block';
        }else{
            t.target.querySelector('.description').style.display ='none';
        }
    })
}
})
})




















</script>

</body>
</html>